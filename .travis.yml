language: python
python:
- '3.5'
- '3.6'
before_install:
- sudo apt-get update
- if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda info -a
- conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION numpy scipy numba
  pandas matplotlib
- source activate test-environment
install:
- python setup.py sdist --formats=zip -k
- find ./dist -iname "*.zip" -print0 | xargs -0 pip install
script:
- python -m unittest discover -s test -p "Test*.py"
deploy:
  provider: pypi
  user: sacdallago
  password:
    secure: GHVvahkjG/CCbgge45vQE6y7i8cJk27uhYp2KiibpZMooveEPrbjK7lwczVDgAtIIvwMZxEj0Z///eyt6MTlL2eGS0EBP2+aOoEHKV5QA+pHRnYIlDTNlbSucBFwH5PUjJDTA7AfYkfn7CKPavjWsg3RikYlSSapX4tadsE4CiEsauRF5a4u70sUO1Ehnqqq4XWE4pfBoW/8DgIcgLiUOLN4KzOE94egAEM55EGvjfDyyZaXk0t31ZDPgqod1md3bBiKQxNTuPf1m0kqHaYpaol1TutN6hdxYz6KJi6Ytm16+Cx/aUPyfRXZLaoR9hPRKm8tzWeUa50uEvBSmimc5Dd5cKnxq0uQh7ReNDfOLlRpH2QNhT6Uxce3MO/LlXiwL3QOySF/JMIUQIGurMwuIbGozjymsmJKwgkHZ1jZ5Kigvkd5s21y5wXf+VmCwL+cJWzxZLhczLf4iZisOoNAAj5m/Jgxgu7L7lLJjORUhOhNNMkD5GBlzb4Hn2EeKddrNDyKT0Xpz3nEfNPgJqww0z98wzzFEvQuKJ2WGP9jMD9d6cGIk9pq7suGOLfodaH7A17vuohUpbOvdWb1AcwMGB4AGw6MEKfqGHiWtKX5/hWfaz+ssbChetd/ynZbMmgE6J+CTe3eOKrxQEUSBqfuqA2VAvNSzesrkVijM0oHigU=
  on:
    tags: true
